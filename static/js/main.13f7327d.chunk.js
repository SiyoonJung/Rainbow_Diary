(this["webpackJsonpchapt-15"]=this["webpackJsonpchapt-15"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(10),o=n.n(a),r=n(9),s=n(3),i=n(11),j=n(2),u=n(5),l=n.n(u),d=n(7),b=n(0),O=function(){var e=Object(c.useContext)(p).onCreate;Object(c.useEffect)((function(){console.log("DiaryEditor \ub80c\ub354")}));var t=Object(c.useState)({author:"",content:"",emotion:1}),n=Object(s.a)(t,2),a=n[0],o=n[1],r=function(e){o(Object(j.a)(Object(j.a)({},a),{},Object(d.a)({},e.target.name,e.target.value)))},i=Object(c.useRef)(null),u=Object(c.useRef)(null);return Object(b.jsxs)("div",{className:"DiaryEditor_container",children:[Object(b.jsx)("h2",{children:"\uc624\ub298\uc758 \uc77c\uae30"}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{ref:i,name:"author",placeholder:"\uc791\uc131\uc790(1\uae00\uc790 \uc774\uc0c1 \uc785\ub825\ud574 \uc8fc\uc138\uc694)",type:"text",value:a.author,onChange:r})}),Object(b.jsx)("div",{children:Object(b.jsx)("textarea",{ref:u,name:"content",placeholder:"\uc77c\uae30(5\uae00\uc790 \uc774\uc0c1 \uc785\ub825\ud574 \uc8fc\uc138\uc694)",type:"text",value:a.content,onChange:r})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:"\uc624\ub298\uc758 \uac10\uc815\uc810\uc218 : "}),Object(b.jsxs)("select",{name:"emotion",value:a.emotion,onChange:r,children:[Object(b.jsx)("option",{value:1,children:"1"}),Object(b.jsx)("option",{value:2,children:"2"}),Object(b.jsx)("option",{value:3,children:"3"}),Object(b.jsx)("option",{value:4,children:"4"}),Object(b.jsx)("option",{value:5,children:"5"})]})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{onClick:function(){console.log("\ucd94\uac00\ub420 \uc77c\uae30 : ",a),a.author.length<1?i.current.focus():a.content.length<5?u.current.focus():(e(a.author,a.content,a.emotion),alert("\uc77c\uae30\uac00 \uc131\uacf5\uc801\uc73c\ub85c \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"),o({author:"",content:"",emotion:1}))},children:"\ub0b4\ub9d8\uc18d\uc5d0 \uc800\uc7a5"})})]})},h=Object(c.memo)(O),f=function(e){var t=e.id,n=e.author,a=e.content,o=e.emotion,r=e.created_date,i=Object(c.useContext)(p),j=i.onRemove,u=i.onEdit;Object(c.useEffect)((function(){console.log("".concat(t,"\ubc88 \uc77c\uae30\uc544\uc774\ud15c \ub80c\ub354"))}));var l=Object(c.useState)(!1),d=Object(s.a)(l,2),O=d[0],h=d[1],f=function(){return h(!O)},m=Object(c.useState)(a),x=Object(s.a)(m,2),v=x[0],g=x[1],C=Object(c.useRef)(null);return Object(b.jsxs)("div",{className:"DiaryItem_container",children:[Object(b.jsxs)("div",{className:"info",children:[Object(b.jsxs)("span",{className:"author_info",children:["| \uc791\uc131\uc790 : ",n," | \uac10\uc815\uc810\uc218 : ",o," |"]}),Object(b.jsx)("br",{}),Object(b.jsx)("span",{className:"date",children:new Date(r).toLocaleString()})]}),Object(b.jsx)("div",{className:"content",children:O?Object(b.jsx)("textarea",{ref:C,value:v,onChange:function(e){return g(e.target.value)}}):a}),O?Object(b.jsxs)("div",{className:"buttons",children:[Object(b.jsx)("button",{className:"btn negative",onClick:function(){g(a),f()},children:"\ucde8\uc18c"}),Object(b.jsx)("button",{className:"btn positive",onClick:function(){v.length<1?C.current.focus():window.confirm("".concat(t+1,"\ubc88 \uc9f8 \uc77c\uae30\ub97c \uc218\uc815\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))&&(u(t,v),f())},children:"\uc800\uc7a5"})]}):Object(b.jsxs)("div",{className:"buttons",children:[Object(b.jsx)("button",{className:"btn negative",onClick:function(){window.confirm("".concat(t+1,"\ubc88 \uc9f8 \uc77c\uae30\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))&&j(t)},children:"\uc0ad\uc81c"}),Object(b.jsx)("button",{className:"btn positive",onClick:f,children:"\uc218\uc815"})]})]})},m=Object(c.memo)(f),x=function(){var e=Object(c.useContext)(v).data;return Object(b.jsxs)("div",{className:"DiaryList_container",children:[Object(b.jsx)("h2",{children:"\uc77c\uae30 \ub9ac\uc2a4\ud2b8"}),Object(b.jsxs)("h4",{children:[e.length,"\uac1c\uc758 \uc77c\uae30\uac00 \uc788\uc2b5\ub2c8\ub2e4."]}),Object(b.jsx)("div",{children:e.map((function(e,t){return Object(b.jsx)(m,Object(j.a)({},e),"diaryitem_".concat(e.id))}))})]})},v=(n(18),Object(c.createContext)(null)),p=Object(c.createContext)(null),g=function(e,t){switch(t.type){case"INIT":return t.data;case"CREATE":var n=(new Date).getTime();return[Object(j.a)(Object(j.a)({},t.data),{},{created_date:n})].concat(Object(i.a)(e));case"REMOVE":return e.filter((function(e){return e.id!==t.targetId}));case"EDIT":return e.map((function(e){return e.id===t.targetId?Object(j.a)(Object(j.a)({},e),{},{content:t.newContent}):e}));default:return e}},C=function(){var e=Object(c.useReducer)(g,[]),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(c.useRef)(0),i=function(){var e=Object(r.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(r.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://jsonplaceholder.typicode.com/comments").then((function(e){return e.json()}));case 2:t=e.sent,n=t.slice(0,5).map((function(e){return{author:e.email,content:e.body,emotion:Math.floor(5*Math.random())+1,created_date:(new Date).getTime(),id:o.current++}})),a({type:"INIT",data:n});case 5:case"end":return e.stop()}}),e)}))),2e3);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){i()}),[]);var j=Object(c.useCallback)((function(e,t,n){a({type:"CREATE",data:{author:e,content:t,emotion:n,id:o.current}}),o.current+=1}),[]),u=Object(c.useCallback)((function(e){a({type:"REMOVE",targetId:e})}),[]),d=Object(c.useCallback)((function(e,t){a({type:"EDIT",targetId:e,newContent:t})}),[]),O=Object(c.useMemo)((function(){var e=n.filter((function(e){return e.emotion>=3})).length;return{goodCount:e,badCount:n.length-e,goodRatio:e/n.length*100}}),[n.length]),f=O.goodCount,m=O.badCount,C=O.goodRatio,N={data:n},E=Object(c.useMemo)((function(){return{onCreate:j,onRemove:u,onEdit:d}}),[]);return Object(b.jsx)(v.Provider,{value:N,children:Object(b.jsx)(p.Provider,{value:E,children:Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(h,{}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{className:"statList",children:[Object(b.jsxs)("div",{className:"stat",children:["\uc804\uccb4 \uc77c\uae30 \uac1c\uc218 : ",n.length]}),Object(b.jsxs)("div",{className:"stat",children:["\uae30\ubd84 \uc88b\uc740 \uc77c\uae30 \uac1c\uc218 : ",f]}),Object(b.jsxs)("div",{className:"stat",children:["\uae30\ubd84 \ub098\uc05c \uc77c\uae30 \uac1c\uc218 : ",m]}),Object(b.jsxs)("div",{className:"stat",children:["\uae30\ubd84 \uc88b\uc740 \uc77c\uae30 \ube44\uc728 : ",C,"%"]})]}),Object(b.jsx)(x,{})]})})})},N=document.getElementById("root");o.a.render(Object(b.jsx)(c.StrictMode,{children:Object(b.jsx)(C,{})}),N)}},[[19,1,2]]]);
//# sourceMappingURL=main.13f7327d.chunk.js.map